2026-01-19 09:39:34,020 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 09:39:34,020 - shipping_chatbot - INFO - Agent created with 52 tools
2026-01-19 09:39:34,025 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 09:49:30,426 - shipping_chatbot - INFO - User_Query: What is status of 5302997239?, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 09:49:30,426 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 09:50:49,830 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 09:50:49,830 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 09:50:49,965 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 09:50:51,030 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 09:50:51,266 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 09:50:51,997 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 09:50:51,997 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 09:50:51,997 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 09:50:52,055 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 09:50:56,046 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302997239
2026-01-19 09:50:56,180 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 09:52:08,580 - shipping_chatbot - INFO - User_Query: What is status of PO 5302997239?, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 09:52:12,124 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302997239
2026-01-19 09:52:12,242 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 10:43:46,551 - shipping_chatbot - INFO - User_Query: What are the POs in the container TCLU4703170?, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 10:43:49,714 - shipping_chatbot - INFO - [get_booking_details] Received query: 'container TCLU4703170'
2026-01-19 10:43:49,714 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=TCLU4703170, po=None, obl=None, booking=None
2026-01-19 10:46:38,180 - shipping_chatbot - INFO - User_Query: What is the container carrying the PO 5302997239?, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 10:46:40,912 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302997239, obl=None, is_lookup=False
2026-01-19 10:46:40,994 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302997239, found 1 rows
2026-01-19 10:46:40,999 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302997239
2026-01-19 10:47:57,531 - shipping_chatbot - INFO - User_Query: What are the POs arriving in Los Angeles?, c_codes: ['0000866']
2026-01-19 10:48:00,612 - shipping_chatbot - INFO - [get_upcoming_pos] Period: next 7 days (default), Dates: 2026-01-19 to 2026-01-26
2026-01-19 10:48:00,662 - shipping_chatbot - INFO - [get_upcoming_pos] Found BARE port code: USLAX (matched in discharge_port)
2026-01-19 10:48:00,662 - shipping_chatbot - INFO - [get_upcoming_pos] After discharge_port filter (USLAX): 26 rows
2026-01-19 10:48:00,662 - shipping_chatbot - INFO - [get_upcoming_pos] Sample discharge ports after filter: ['LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)']
2026-01-19 10:48:00,662 - shipping_chatbot - INFO - [get_upcoming_pos] Returning 26 PO records
2026-01-19 10:50:23,863 - shipping_chatbot - INFO - User_Query: Please provide the shipment status of 5302970007, c_codes: ['0001540']
2026-01-19 10:50:26,640 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302970007
2026-01-19 10:50:26,643 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 10:55:16,244 - shipping_chatbot - INFO - User_Query: Please provide the shipment status of 5302970007, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 10:55:19,183 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302970007
2026-01-19 10:55:19,261 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 10:58:25,455 - shipping_chatbot - INFO - User_Query: List out any delay shipments in Augest, c_codes: ['0000866']
2026-01-19 10:58:28,259 - shipping_chatbot - INFO - [get_delayed_containers] Query: 'delayed shipments in August 2025', consignee_code: None
2026-01-19 10:58:28,259 - shipping_chatbot - INFO - [get_delayed_containers] Time filter: August 2025 (2025-08-01 to 2025-08-31)
2026-01-19 10:58:28,349 - shipping_chatbot - INFO - [get_delayed_containers] After time filter: 229 containers
2026-01-19 11:00:31,046 - shipping_chatbot - INFO - User_Query: What is the consignee of 5302943326, c_codes: ['0002990']
2026-01-19 11:00:33,882 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302943326, obl=None, is_lookup=False
2026-01-19 11:00:33,887 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302943326, found 1 rows
2026-01-19 11:00:33,891 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302943326
2026-01-19 11:02:38,124 - shipping_chatbot - INFO - User_Query: Booking number of 5302943326, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 11:02:40,819 - shipping_chatbot - INFO - [get_booking_details] Received query: '5302943326'
2026-01-19 11:02:40,819 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302943326, obl=None, booking=None
2026-01-19 11:08:04,344 - shipping_chatbot - INFO - User_Query: What containers depature from CNSHA today, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 11:08:07,117 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 11:08:07,117 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'CNSHA'
2026-01-19 11:08:07,122 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 11:08:07,208 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 12654 rows
2026-01-19 11:08:07,208 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-19 11:08:07,284 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Code match 'CNSHA': 587 rows
2026-01-19 11:08:07,295 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 4 records (is_booking_query=False)
2026-01-19 11:11:52,141 - shipping_chatbot - INFO - User_Query: What containers depature from CNSHA today, c_codes: ['0000866', '0040070']
2026-01-19 11:11:54,827 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 11:11:54,827 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'CNSHA'
2026-01-19 11:11:54,827 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 11:11:54,894 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 3578 rows
2026-01-19 11:11:54,894 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866', '0040070']
2026-01-19 11:11:54,917 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Code match 'CNSHA': 115 rows
2026-01-19 11:11:54,929 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 8 records (is_booking_query=False)
2026-01-19 11:20:17,382 - shipping_chatbot - INFO - User_Query: What containers depature from Shanghai China today, c_codes: ['0000866', '0040070']
2026-01-19 11:20:20,314 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 11:20:20,314 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'SHANGHAI'
2026-01-19 11:20:20,315 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 11:20:20,391 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 3578 rows
2026-01-19 11:20:20,391 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866', '0040070']
2026-01-19 11:20:20,416 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Exact name match 'SHANGHAI': 115 rows
2026-01-19 11:20:20,435 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 8 records (is_booking_query=False)
2026-01-19 11:22:03,274 - shipping_chatbot - INFO - User_Query: How many will be depature today from CNSHA, c_codes: ['0000866', '0040070']
2026-01-19 11:22:06,149 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 11:22:06,149 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'CNSHA'
2026-01-19 11:22:06,149 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 11:22:06,222 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 3578 rows
2026-01-19 11:22:06,237 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866', '0040070']
2026-01-19 11:22:06,281 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Code match 'CNSHA': 115 rows
2026-01-19 11:22:06,293 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 8 records (is_booking_query=False)
2026-01-19 11:44:55,277 - shipping_chatbot - INFO - User_Query: what are the po containing HMMU9056839, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 11:44:58,169 - shipping_chatbot - INFO - [get_booking_details] Received query: 'container HMMU9056839'
2026-01-19 11:44:58,169 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=HMMU9056839, po=None, obl=None, booking=None
2026-01-19 12:07:01,332 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:07:01,332 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:07:01,332 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:13:36,348 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:13:36,348 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 12:13:51,004 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 12:13:51,020 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 12:13:51,104 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 12:13:51,943 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 12:13:52,152 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 12:13:52,770 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 12:13:52,770 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 12:13:52,770 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 12:13:52,826 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 12:15:16,267 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:15:19,157 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:33:34,945 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:33:34,945 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:33:34,945 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:34:00,932 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:34:00,932 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 12:34:18,056 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 12:34:18,073 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 12:34:18,189 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 12:34:19,206 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 12:34:19,489 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 12:34:20,362 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 12:34:20,364 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 12:34:20,364 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 12:34:20,396 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 12:34:24,243 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:34:40,300 - shipping_chatbot - INFO - Router: Set consignee codes ['0000866', '0040070', '0028664'] for query: Cargo ready date for PO#6300139937
2026-01-19 12:34:40,367 - shipping_chatbot - INFO - Consignee filtering validated: 5919 rows for codes ['0000866', '0040070', '0028664']
2026-01-19 12:35:13,109 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:35:17,186 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:36:10,920 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:36:16,685 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:38:27,852 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:38:27,852 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:38:27,853 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:38:32,255 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:38:32,257 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:38:32,257 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:41:12,376 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:41:12,376 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:41:12,376 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:42:10,763 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:42:10,763 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 12:43:16,525 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 12:43:16,529 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 12:43:16,625 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 12:43:17,492 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 12:43:17,722 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 12:43:18,501 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 12:43:18,501 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 12:43:18,503 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 12:43:18,547 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 12:43:24,675 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:46:09,834 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:46:09,834 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:46:09,834 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:46:51,002 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:46:51,002 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 12:47:03,809 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 12:47:03,809 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 12:47:03,915 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 12:47:04,729 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 12:47:05,007 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 12:47:05,855 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 12:47:05,857 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 12:47:05,859 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 12:47:05,904 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 12:47:10,981 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:47:10,997 - shipping_chatbot - ERROR - Agent failed: 'list' object has no attribute 'strip'
Traceback (most recent call last):
  File "D:\chatbot16012026\StlnkWebNprdChatV2\api\main.py", line 291, in ask
    output = (result.get("output") or "").strip()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'strip'
2026-01-19 12:47:11,038 - shipping_chatbot - INFO - Router: Set consignee codes ['0000866', '0040070', '0028664'] for query: Cargo ready date for PO#6300139937
2026-01-19 12:47:11,112 - shipping_chatbot - INFO - Consignee filtering validated: 5919 rows for codes ['0000866', '0040070', '0028664']
2026-01-19 12:48:34,450 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:48:39,835 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:48:39,839 - shipping_chatbot - ERROR - Agent failed: 'list' object has no attribute 'strip'
Traceback (most recent call last):
  File "D:\chatbot16012026\StlnkWebNprdChatV2\api\main.py", line 291, in ask
    output = (result.get("output") or "").strip()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'strip'
2026-01-19 12:48:39,839 - shipping_chatbot - INFO - Router: Set consignee codes ['0000866', '0040070', '0028664'] for query: Cargo ready date for PO#6300139937
2026-01-19 12:48:39,904 - shipping_chatbot - INFO - Consignee filtering validated: 5919 rows for codes ['0000866', '0040070', '0028664']
2026-01-19 12:49:08,730 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 12:49:08,730 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 12:49:08,730 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 12:49:12,342 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:49:12,342 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 12:49:29,515 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 12:49:29,515 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 12:49:29,632 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 12:49:30,432 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 12:49:30,658 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 12:49:31,548 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 12:49:31,548 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 12:49:31,548 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 12:49:31,605 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 12:49:36,913 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:49:49,578 - shipping_chatbot - INFO - Router: Set consignee codes ['0000866', '0040070', '0028664'] for query: Cargo ready date for PO#6300139937
2026-01-19 12:49:49,650 - shipping_chatbot - INFO - Consignee filtering validated: 5919 rows for codes ['0000866', '0040070', '0028664']
2026-01-19 12:50:13,924 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#6300139937, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:50:21,615 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300139937
2026-01-19 12:52:22,792 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302836671, c_codes: ['0000866', '0040070', '0028664']
2026-01-19 12:52:27,757 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302836671
2026-01-19 13:00:50,188 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302853164, c_codes: ['0025833']
2026-01-19 13:00:54,695 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302853164
2026-01-19 13:10:27,776 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302836671, c_codes: ['0043881', '0000866']
2026-01-19 13:10:32,366 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302836671
2026-01-19 13:11:56,522 - shipping_chatbot - INFO - User_Query: Booking number of 5302943326, c_codes: ['0043881', '0000866']
2026-01-19 13:11:59,472 - shipping_chatbot - INFO - [get_booking_details] Received query: '5302943326'
2026-01-19 13:11:59,474 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302943326, obl=None, booking=None
2026-01-19 13:12:00,451 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302943326'
2026-01-19 13:12:00,451 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302943326, obl=None, booking=None
2026-01-19 13:12:37,915 - shipping_chatbot - INFO - User_Query: Booking number of 5302943326, c_codes: ['0043881', '0000866', '0002990']
2026-01-19 13:12:40,673 - shipping_chatbot - INFO - [get_booking_details] Received query: '5302943326'
2026-01-19 13:12:40,673 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302943326, obl=None, booking=None
2026-01-19 13:14:22,166 - shipping_chatbot - INFO - User_Query: What is the shipper for PO#5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:14:25,409 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 13:14:25,428 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:14:25,432 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 13:14:40,271 - shipping_chatbot - INFO - Router: Set consignee codes ['0043881', '0000866', '0002990', '0002907'] for query: What is the shipper for PO#5302982894
2026-01-19 13:14:40,326 - shipping_chatbot - INFO - Consignee filtering validated: 3531 rows for codes ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:14:40,374 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=True
2026-01-19 13:14:40,396 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:14:40,398 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 13:15:16,944 - shipping_chatbot - INFO - User_Query: What is the shipper for PO#5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:15:19,890 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 13:15:19,909 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:15:19,909 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 13:15:34,356 - shipping_chatbot - INFO - Router: Set consignee codes ['0043881', '0000866', '0002990', '0002907'] for query: What is the shipper for PO#5302982894
2026-01-19 13:15:34,434 - shipping_chatbot - INFO - Consignee filtering validated: 3531 rows for codes ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:15:34,509 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=True
2026-01-19 13:15:34,526 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:15:34,526 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 13:16:30,660 - shipping_chatbot - INFO - User_Query: What is the shipper for PO 5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:16:33,629 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 13:16:33,650 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:16:33,654 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 13:16:48,615 - shipping_chatbot - INFO - Router: Set consignee codes ['0043881', '0000866', '0002990', '0002907'] for query: What is the shipper for PO 5302982894
2026-01-19 13:16:48,679 - shipping_chatbot - INFO - Consignee filtering validated: 3531 rows for codes ['0043881', '0000866', '0002990', '0002907']
2026-01-19 13:16:48,746 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=True
2026-01-19 13:16:48,767 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 13:16:48,767 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:02:09,782 - shipping_chatbot - INFO - User_Query: What is the shipper for PO 5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:02:13,080 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 14:02:13,097 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:02:13,105 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:06:02,791 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 14:06:02,791 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 14:06:02,791 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 14:06:07,497 - shipping_chatbot - INFO - User_Query: What is the shipper for PO 5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:06:07,497 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 14:06:56,235 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 14:06:56,242 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 14:06:56,345 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 14:06:57,031 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 14:06:57,246 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 14:06:58,041 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 14:06:58,041 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 14:06:58,052 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 14:06:58,098 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 14:07:01,454 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 14:07:01,482 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:07:01,486 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:07:01,490 - shipping_chatbot - ERROR - Agent failed: 'list' object has no attribute 'strip'
Traceback (most recent call last):
  File "D:\chatbot16012026\StlnkWebNprdChatV2\api\main.py", line 291, in ask
    output = (result.get("output") or "").strip()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'strip'
2026-01-19 14:07:01,547 - shipping_chatbot - INFO - Router: Set consignee codes ['0043881', '0000866', '0002990', '0002907'] for query: What is the shipper for PO 5302982894
2026-01-19 14:07:01,633 - shipping_chatbot - INFO - Consignee filtering validated: 3531 rows for codes ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:07:01,704 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=True
2026-01-19 14:07:01,726 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:07:01,728 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:11:09,790 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 14:11:09,790 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 14:11:09,790 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 14:11:17,003 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 14:11:17,006 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 14:11:17,006 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 14:11:24,553 - shipping_chatbot - INFO - User_Query: What is the shipper for PO 5302982894, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:11:24,562 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 14:11:41,929 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 14:11:41,939 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 14:11:42,062 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 14:11:43,206 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 14:11:43,421 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 14:11:44,646 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 14:11:44,646 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 14:11:44,646 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 14:11:44,696 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 14:11:48,306 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 14:11:48,332 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:11:48,341 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:13:21,902 - shipping_chatbot - INFO - User_Query: What is status of 5302997239?, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:13:25,445 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302997239
2026-01-19 14:13:25,506 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 14:14:00,659 - shipping_chatbot - INFO - User_Query: What are the POs in the container TCLU4703170?, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:14:03,781 - shipping_chatbot - INFO - [get_booking_details] Received query: 'container TCLU4703170'
2026-01-19 14:14:03,781 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=TCLU4703170, po=None, obl=None, booking=None
2026-01-19 14:14:55,386 - shipping_chatbot - INFO - User_Query: What is the container carrying the PO 5302997239?, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:14:59,095 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302997239'
2026-01-19 14:14:59,095 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302997239, obl=None, booking=None
2026-01-19 14:15:28,781 - shipping_chatbot - INFO - User_Query: What are the POs arriving in Los Angeles?, c_codes: ['0043881', '0000866', '0002990', '0002907']
2026-01-19 14:15:31,968 - shipping_chatbot - INFO - [get_upcoming_pos] Period: next 7 days (default), Dates: 2026-01-19 to 2026-01-26
2026-01-19 14:15:32,062 - shipping_chatbot - INFO - [get_upcoming_pos] Found BARE port code: USLAX (matched in discharge_port)
2026-01-19 14:15:32,062 - shipping_chatbot - INFO - [get_upcoming_pos] After discharge_port filter (USLAX): 42 rows
2026-01-19 14:15:32,065 - shipping_chatbot - INFO - [get_upcoming_pos] Sample discharge ports after filter: ['LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)']
2026-01-19 14:15:32,065 - shipping_chatbot - INFO - [get_upcoming_pos] Returning 42 PO records
2026-01-19 14:16:54,781 - shipping_chatbot - INFO - User_Query: Please provide the shipment status of 5302970007, c_codes: ['0043881', '0000866', '0002990', '0002907', '0001540']
2026-01-19 14:16:58,247 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302970007
2026-01-19 14:16:58,309 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-19 14:17:54,464 - shipping_chatbot - INFO - User_Query: List out any delay shipments in December 2025, c_codes: ['0043881', '0000866']
2026-01-19 14:17:57,604 - shipping_chatbot - INFO - [get_delayed_containers] Query: 'delayed shipments in December 2025', consignee_code: None
2026-01-19 14:17:57,606 - shipping_chatbot - INFO - [get_delayed_containers] Time filter: December 2025 (2025-12-01 to 2025-12-31)
2026-01-19 14:17:57,691 - shipping_chatbot - INFO - [get_delayed_containers] After time filter: 218 containers
2026-01-19 14:21:19,691 - shipping_chatbot - INFO - User_Query: What is the consignee of 5302943326, c_codes: ['0043881', '0000866', '0002990']
2026-01-19 14:21:23,256 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302943326, obl=None, is_lookup=False
2026-01-19 14:21:23,308 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302943326, found 1 rows
2026-01-19 14:21:23,315 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302943326
2026-01-19 14:22:16,085 - shipping_chatbot - INFO - User_Query: What is the consignee of 5302943326, c_codes: ['0043881', '0000866', '0002990']
2026-01-19 14:22:19,602 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302943326, obl=None, is_lookup=False
2026-01-19 14:22:19,639 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302943326, found 1 rows
2026-01-19 14:22:19,643 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302943326
2026-01-19 14:23:41,636 - shipping_chatbot - INFO - User_Query: Booking number of 5302943326, c_codes: ['0043881', '0000866', '0002990']
2026-01-19 14:23:44,837 - shipping_chatbot - INFO - [get_booking_details] Received query: '5302943326'
2026-01-19 14:23:44,837 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302943326, obl=None, booking=None
2026-01-19 14:24:40,171 - shipping_chatbot - INFO - User_Query: What containers depature from CNSHA today, c_codes: ['0000866']
2026-01-19 14:24:43,687 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 14:24:43,687 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'CNSHA'
2026-01-19 14:24:43,692 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 14:24:43,770 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 2107 rows
2026-01-19 14:24:43,770 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866']
2026-01-19 14:24:43,790 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Code match 'CNSHA': 63 rows
2026-01-19 14:24:43,805 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 4 records (is_booking_query=False)
2026-01-19 14:25:42,631 - shipping_chatbot - INFO - User_Query: How many will be depature today from CNSHA, c_codes: ['0000866']
2026-01-19 14:25:45,788 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 14:25:45,788 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'CNSHA'
2026-01-19 14:25:45,794 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 14:25:45,934 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 2107 rows
2026-01-19 14:25:45,934 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866']
2026-01-19 14:25:45,971 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Code match 'CNSHA': 63 rows
2026-01-19 14:25:45,986 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 4 records (is_booking_query=False)
2026-01-19 14:26:26,655 - shipping_chatbot - INFO - User_Query: How many containers will be depature today from shanghai, c_codes: ['0000866']
2026-01-19 14:26:29,796 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-19 14:26:29,796 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'SHANGHAI'
2026-01-19 14:26:29,796 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-19 00:00:00 to 2026-01-19 00:00:00 (today), is_booking_query=False
2026-01-19 14:26:29,939 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 2107 rows
2026-01-19 14:26:29,939 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866']
2026-01-19 14:26:29,970 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Exact name match 'SHANGHAI': 63 rows
2026-01-19 14:26:29,988 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Returning 4 records (is_booking_query=False)
2026-01-19 14:27:43,017 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0002907']
2026-01-19 14:27:46,624 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302982894
2026-01-19 14:28:18,495 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0002907']
2026-01-19 14:28:22,220 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302982894
2026-01-19 14:28:36,033 - shipping_chatbot - INFO - Router: Set consignee codes ['0002907'] for query: Cargo ready date for PO#5302982894
2026-01-19 14:28:36,135 - shipping_chatbot - INFO - Consignee filtering validated: 402 rows for codes ['0002907']
2026-01-19 14:28:48,090 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0002907']
2026-01-19 14:28:52,331 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302982894
2026-01-19 14:31:43,104 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302975704, c_codes: ['0002907']
2026-01-19 14:31:47,028 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302975704
2026-01-19 14:34:31,614 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#UR01-PON-25090002453, c_codes: ['0021547']
2026-01-19 14:35:25,995 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302972528, c_codes: ['0025833']
2026-01-19 14:35:30,148 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302972528
2026-01-19 14:37:50,301 - shipping_chatbot - INFO - User_Query: What is the shipper for PO#5302982894, c_codes: ['0025833', '0002907']
2026-01-19 14:37:54,081 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 14:37:54,095 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:37:54,095 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:38:54,973 - shipping_chatbot - INFO - User_Query: What is the supplier for PO#5302982894, c_codes: ['0025833', '0002907']
2026-01-19 14:38:58,079 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5302982894, obl=None, is_lookup=False
2026-01-19 14:38:58,108 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5302982894, found 1 rows
2026-01-19 14:38:58,117 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Returning 1 supplier record(s) for PO 5302982894
2026-01-19 14:43:53,442 - shipping_chatbot - INFO - User_Query: What is the status of TCLU9332787?, c_codes: ['0025833', '0002907', '0005053']
2026-01-19 14:45:15,506 - shipping_chatbot - INFO - User_Query: What is the last milestone of TCLU9332787?, c_codes: ['0025833', '0002907', '0005053']
2026-01-19 14:47:02,363 - shipping_chatbot - INFO - User_Query: Will container UETU4079469 be moved via Rail?, c_codes: ['0025833', '0002907', '0005053', '0000866']
2026-01-19 14:47:18,064 - shipping_chatbot - INFO - User_Query: Will container UETU4079469 be moved via Rail?, c_codes: ['0025833', '0002907', '0005053', '0000866']
2026-01-19 14:47:42,557 - shipping_chatbot - INFO - User_Query: Will container UETU4079469 be moved via Rail?, c_codes: ['0000866']
2026-01-19 14:49:29,504 - shipping_chatbot - INFO - User_Query: Which containers have arrived DP but not yet to final destination?, c_codes: ['0000866']
2026-01-19 14:49:32,917 - shipping_chatbot - INFO - Processing natural language query: Select container_number from shipments where ata_dp is not null and (ata_fd is null or ata_fd = '')
2026-01-19 14:49:36,659 - shipping_chatbot - ERROR - Failed to process natural language query: 1 validation error for SQLDatabaseToolkit
db
  instance of SQLDatabase expected (type=type_error.arbitrary_type; expected_arbitrary_type=SQLDatabase)
Traceback (most recent call last):
  File "D:\chatbot16012026\StlnkWebNprdChatV2\agents\tools.py", line 7035, in sql_query_tool
    sql_agent = initialize_sql_agent()
                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\chatbot16012026\StlnkWebNprdChatV2\agents\azure_agent.py", line 95, in initialize_sql_agent
    sql_agent_executor = create_sql_agent(
                         ^^^^^^^^^^^^^^^^^
  File "D:\chatbot15102025\StlnkWebNprdChatV2-main\venv\Lib\site-packages\langchain_community\agent_toolkits\sql\base.py", line 139, in create_sql_agent
    toolkit = toolkit or SQLDatabaseToolkit(llm=llm, db=db)  # type: ignore[arg-type]
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\chatbot15102025\StlnkWebNprdChatV2-main\venv\Lib\site-packages\pydantic\v1\main.py", line 347, in __init__
    raise validation_error
pydantic.v1.error_wrappers.ValidationError: 1 validation error for SQLDatabaseToolkit
db
  instance of SQLDatabase expected (type=type_error.arbitrary_type; expected_arbitrary_type=SQLDatabase)
2026-01-19 14:49:37,855 - shipping_chatbot - INFO - Processing natural language query: Select container_number from shipments where ata_dp is not null and (ata_fd is null or ata_fd = '')
2026-01-19 14:49:41,358 - shipping_chatbot - ERROR - Failed to process natural language query: 1 validation error for SQLDatabaseToolkit
db
  instance of SQLDatabase expected (type=type_error.arbitrary_type; expected_arbitrary_type=SQLDatabase)
Traceback (most recent call last):
  File "D:\chatbot16012026\StlnkWebNprdChatV2\agents\tools.py", line 7035, in sql_query_tool
    sql_agent = initialize_sql_agent()
                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\chatbot16012026\StlnkWebNprdChatV2\agents\azure_agent.py", line 95, in initialize_sql_agent
    sql_agent_executor = create_sql_agent(
                         ^^^^^^^^^^^^^^^^^
  File "D:\chatbot15102025\StlnkWebNprdChatV2-main\venv\Lib\site-packages\langchain_community\agent_toolkits\sql\base.py", line 139, in create_sql_agent
    toolkit = toolkit or SQLDatabaseToolkit(llm=llm, db=db)  # type: ignore[arg-type]
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\chatbot15102025\StlnkWebNprdChatV2-main\venv\Lib\site-packages\pydantic\v1\main.py", line 347, in __init__
    raise validation_error
pydantic.v1.error_wrappers.ValidationError: 1 validation error for SQLDatabaseToolkit
db
  instance of SQLDatabase expected (type=type_error.arbitrary_type; expected_arbitrary_type=SQLDatabase)
2026-01-19 15:08:46,148 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in Oct, c_codes: ['0042485', '0045831']
2026-01-19 15:08:49,652 - shipping_chatbot - INFO - [get_containers_by_final_destination] Received query: 'containers arriving at WEST JEFFERSON, OH in October 2025'
2026-01-19 15:08:49,654 - shipping_chatbot - INFO - 
 days: 7
2026-01-19 15:08:49,654 - shipping_chatbot - INFO - [get_containers_by_final_destination] parsed_n_days=7 today=2026-01-19 end_date=2026-01-26
2026-01-19 15:08:49,794 - shipping_chatbot - INFO - Location = None
2026-01-19 15:14:47,388 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in Nov, c_codes: ['0042485', '0045831']
2026-01-19 15:14:51,120 - shipping_chatbot - INFO - [get_containers_by_final_destination] Received query: 'containers arriving at WEST JEFFERSON, OH in November 2025'
2026-01-19 15:14:51,120 - shipping_chatbot - INFO - 
 days: 7
2026-01-19 15:14:51,120 - shipping_chatbot - INFO - [get_containers_by_final_destination] parsed_n_days=7 today=2026-01-19 end_date=2026-01-26
2026-01-19 15:14:51,263 - shipping_chatbot - INFO - Location = None
2026-01-19 15:16:11,849 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 15:16:15,493 - shipping_chatbot - INFO - [get_containers_by_final_destination] Received query: 'containers arriving at WEST JEFFERSON, OH in December 2025'
2026-01-19 15:16:15,493 - shipping_chatbot - INFO - 
 days: 7
2026-01-19 15:16:15,493 - shipping_chatbot - INFO - [get_containers_by_final_destination] parsed_n_days=7 today=2026-01-19 end_date=2026-01-26
2026-01-19 15:16:15,628 - shipping_chatbot - INFO - Location = None
2026-01-19 15:30:44,645 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 15:30:44,645 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 15:30:44,645 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 15:30:51,521 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 15:30:51,521 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 15:30:51,521 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 15:31:30,101 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 15:31:30,101 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 15:31:48,544 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 15:31:48,551 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 15:31:48,683 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 15:31:49,832 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 15:31:50,189 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 15:31:51,250 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 15:31:51,254 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 15:31:51,254 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 15:31:51,317 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 15:31:54,348 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 15:31:54,348 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 15:31:54,441 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['predictive_eta_fd', 'revised_eta_fd', 'eta_fd']
2026-01-19 15:32:15,558 - shipping_chatbot - INFO - Router: Set consignee codes ['0042485', '0045831'] for query: Which containers are going to WEST JEFFERSON, OH in dec
2026-01-19 15:32:15,642 - shipping_chatbot - INFO - Consignee filtering validated: 1561 rows for codes ['0042485', '0045831']
2026-01-19 15:33:22,363 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 15:33:26,094 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 15:33:26,097 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 15:33:26,239 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['predictive_eta_fd', 'revised_eta_fd', 'eta_fd']
2026-01-19 15:33:41,690 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 15:33:41,690 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 15:33:41,805 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['predictive_eta_fd', 'revised_eta_fd', 'eta_fd']
2026-01-19 15:33:43,993 - shipping_chatbot - INFO - Router: Set consignee codes ['0042485', '0045831'] for query: Which containers are going to WEST JEFFERSON, OH in dec
2026-01-19 15:33:44,118 - shipping_chatbot - INFO - Consignee filtering validated: 1561 rows for codes ['0042485', '0045831']
2026-01-19 15:33:55,161 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 15:33:58,533 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 15:33:58,533 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 15:33:58,654 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['predictive_eta_fd', 'revised_eta_fd', 'eta_fd']
2026-01-19 15:34:17,211 - shipping_chatbot - INFO - Router: Set consignee codes ['0042485', '0045831'] for query: Which containers are going to WEST JEFFERSON, OH in dec
2026-01-19 15:34:17,351 - shipping_chatbot - INFO - Consignee filtering validated: 1561 rows for codes ['0042485', '0045831']
2026-01-19 15:46:33,124 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 15:46:33,124 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 15:46:33,124 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 15:46:48,321 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 15:46:48,321 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 15:47:02,744 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 15:47:02,744 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 15:47:02,859 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 15:47:03,474 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 15:47:03,757 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 15:47:04,437 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 15:47:04,441 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 15:47:04,441 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 15:47:04,463 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 15:47:07,444 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 15:47:07,445 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 15:47:07,491 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 1561 rows
2026-01-19 15:47:07,491 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['predictive_eta_fd', 'revised_eta_fd', 'eta_fd', 'delivery_date_to_consignee']
2026-01-19 15:47:07,507 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'WEST JEFFERSON', code: 'None'
2026-01-19 15:47:07,515 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-19 15:47:07,516 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 482 matches
2026-01-19 15:47:07,527 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 482 containers after FD filter
2026-01-19 15:47:07,530 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 1 containers after date filter
2026-01-19 15:47:07,543 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 1 containers with summary stats
2026-01-19 16:00:01,021 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:00:01,021 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:00:01,021 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:00:32,747 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:00:32,763 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:00:32,763 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:00:36,986 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:00:36,986 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:00:36,986 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:10:49,941 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:10:49,941 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:10:49,941 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:18:03,012 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:18:03,014 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:18:03,014 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:18:07,199 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:18:07,199 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:18:07,199 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:18:13,769 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 16:18:13,771 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 16:18:29,694 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 16:18:29,698 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 16:18:29,779 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 16:18:30,578 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 16:18:30,847 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 16:18:31,424 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 16:18:31,424 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 16:18:31,428 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 16:18:31,458 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 16:18:35,163 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 16:18:35,163 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 16:18:35,231 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 1561 rows
2026-01-19 16:18:35,232 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['eta_fd', 'delivery_date_to_consignee']
2026-01-19 16:18:35,236 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'WEST JEFFERSON', code: 'None'
2026-01-19 16:18:35,243 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-19 16:18:35,249 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 482 matches
2026-01-19 16:18:35,254 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 482 containers after FD filter
2026-01-19 16:18:35,257 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 1 containers after date filter
2026-01-19 16:18:35,266 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 1 containers with summary stats
2026-01-19 16:23:29,675 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:23:29,675 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:23:29,675 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:31:03,843 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 16:31:03,843 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 16:31:25,017 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 16:31:25,020 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 16:31:25,119 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 16:31:25,880 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 16:31:26,135 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 16:31:26,855 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 16:31:26,855 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 16:31:26,855 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 16:31:26,897 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 16:31:30,818 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 16:31:30,818 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 16:31:30,884 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 1561 rows
2026-01-19 16:31:30,884 - shipping_chatbot - INFO - [get_containers_by_final_destination] Available date columns: ['eta_fd', 'delivery_date_to_consignee']
2026-01-19 16:31:30,884 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'WEST JEFFERSON', code: 'None'
2026-01-19 16:31:30,901 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-19 16:31:30,910 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 482 matches
2026-01-19 16:31:30,910 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 482 containers after FD filter
2026-01-19 16:31:30,921 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 1 containers after date filter
2026-01-19 16:31:30,924 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 1 containers with summary stats
2026-01-19 16:34:36,112 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:34:36,112 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:34:36,112 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:34:40,095 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:34:40,095 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:34:40,095 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:34:43,694 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 16:34:43,694 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 16:35:02,863 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 16:35:02,863 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 16:35:02,950 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 16:35:03,663 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 16:35:03,845 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 16:35:04,494 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 16:35:04,494 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 16:35:04,494 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 16:35:04,531 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 16:35:07,877 - shipping_chatbot - INFO - [get_upcoming_arrivals] Period: December 1, 2025, Dates: 2025-12-01 to 2025-12-01, is_past=True
2026-01-19 16:35:07,968 - shipping_chatbot - INFO - [get_upcoming_arrivals] Found city location: WEST JEFFERSON (normalized: WEST JEFFERSON)
2026-01-19 16:35:10,109 - shipping_chatbot - INFO - [get_upcoming_arrivals] Period: December 1, 2025, Dates: 2025-12-01 to 2025-12-01, is_past=True
2026-01-19 16:35:12,276 - shipping_chatbot - INFO - [get_upcoming_arrivals] Period: December 1, 2025, Dates: 2025-12-01 to 2025-12-01, is_past=True
2026-01-19 16:35:12,370 - shipping_chatbot - INFO - [get_upcoming_arrivals] Found city location: WEST JEFFERSON (normalized: WEST JEFFERSON)
2026-01-19 16:36:21,857 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 16:36:25,434 - shipping_chatbot - INFO - [get_containers_by_final_destination] Received query: 'containers arriving at WEST JEFFERSON, OH in December 2025'
2026-01-19 16:36:25,434 - shipping_chatbot - INFO - 
 days: 7
2026-01-19 16:36:25,442 - shipping_chatbot - INFO - [get_containers_by_final_destination] parsed_n_days=7 today=2026-01-19 end_date=2026-01-26
2026-01-19 16:36:25,490 - shipping_chatbot - INFO - Location = None
2026-01-19 16:44:06,770 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 16:44:06,771 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 16:44:06,771 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 16:45:21,772 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in dec, c_codes: ['0042485', '0045831']
2026-01-19 16:45:21,772 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 16:45:42,261 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 16:45:42,262 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 16:45:42,377 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 16:45:43,146 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 16:45:43,345 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 16:45:44,046 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 16:45:44,046 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 16:45:44,046 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 16:45:44,092 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 16:45:47,379 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in December 2025
2026-01-19 16:45:47,379 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-12-01 00:00:00 to 2025-12-01 00:00:00 (December 1, 2025)
2026-01-19 16:45:47,480 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 1561 rows
2026-01-19 16:45:47,480 - shipping_chatbot - INFO - [get_containers_by_final_destination] Using eta_fd column only
2026-01-19 16:45:47,480 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'WEST JEFFERSON', code: 'None'
2026-01-19 16:45:47,480 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-19 16:45:47,502 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 482 matches
2026-01-19 16:45:47,508 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 482 containers after FD filter
2026-01-19 16:45:47,510 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 0 containers after date filter (using eta_fd only)
2026-01-19 16:51:33,814 - shipping_chatbot - INFO - User_Query: Any containers delayed on Oct?, c_codes: ['0042485', '0045831']
2026-01-19 16:51:36,993 - shipping_chatbot - INFO - [get_delayed_containers] Query: 'delayed in October 2025', consignee_code: None
2026-01-19 16:51:36,993 - shipping_chatbot - INFO - [get_delayed_containers] Time filter: October 2025 (2025-10-01 to 2025-10-31)
2026-01-19 16:51:37,128 - shipping_chatbot - INFO - [get_delayed_containers] After time filter: 141 containers
2026-01-19 17:24:17,270 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-19 17:24:17,270 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-19 17:24:17,270 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-19 17:24:40,795 - shipping_chatbot - INFO - User_Query: Which containers are going to WEST JEFFERSON, OH in Oct, c_codes: ['0042485', '0045831']
2026-01-19 17:24:40,795 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-19 17:24:57,853 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-19 17:24:57,856 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-19 17:24:57,963 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-19 17:24:58,756 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-19 17:24:58,922 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-19 17:24:59,488 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-19 17:24:59,488 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-19 17:24:59,488 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-19 17:24:59,526 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-19 17:25:03,754 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at WEST JEFFERSON, OH in October 2025
2026-01-19 17:25:03,754 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-10-01 00:00:00 to 2025-10-31 00:00:00 (October 2025)
2026-01-19 17:25:03,822 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 1561 rows
2026-01-19 17:25:03,823 - shipping_chatbot - INFO - [get_containers_by_final_destination] Using eta_fd column only
2026-01-19 17:25:03,823 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'WEST JEFFERSON', code: 'None'
2026-01-19 17:25:03,831 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-19 17:25:03,840 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 482 matches
2026-01-19 17:25:03,845 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 482 containers after FD filter
2026-01-19 17:25:03,848 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 100 containers after date filter (using eta_fd only)
2026-01-19 17:25:03,848 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 100 containers
2026-01-19 17:36:48,152 - shipping_chatbot - INFO - User_Query: Any containers delayed on Oct?, c_codes: ['0042485', '0045831']
2026-01-19 17:36:50,998 - shipping_chatbot - INFO - [get_delayed_containers] Query: 'delayed containers in October 2025', consignee_code: None
2026-01-19 17:36:50,998 - shipping_chatbot - INFO - [get_delayed_containers] Time filter: October 2025 (2025-10-01 to 2025-10-31)
2026-01-19 17:36:51,116 - shipping_chatbot - INFO - [get_delayed_containers] After time filter: 141 containers
2026-01-19 17:42:07,279 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0042485', '0045831', '0002907']
2026-01-19 17:42:10,158 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-19 17:42:10,158 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-19 17:43:41,586 - shipping_chatbot - INFO - User_Query: What are the POs arriving in Los Angeles?, c_codes: ['0042485', '0045831', '0002907']
2026-01-19 17:43:45,059 - shipping_chatbot - INFO - [get_upcoming_pos] Period: next 7 days (default), Dates: 2026-01-19 to 2026-01-26
2026-01-19 17:43:45,110 - shipping_chatbot - INFO - [get_upcoming_pos] Returning 47 PO records
2026-01-19 17:45:15,419 - shipping_chatbot - INFO - User_Query: What are the POs arriving in Los Angeles?, c_codes: ['0042485', '0045831', '0002907', '0000866']
2026-01-19 17:45:18,329 - shipping_chatbot - INFO - [get_upcoming_pos] Period: next 7 days (default), Dates: 2026-01-19 to 2026-01-26
2026-01-19 17:45:18,424 - shipping_chatbot - INFO - [get_upcoming_pos] Found BARE port code: USLAX (matched in discharge_port)
2026-01-19 17:45:18,426 - shipping_chatbot - INFO - [get_upcoming_pos] After discharge_port filter (USLAX): 26 rows
2026-01-19 17:45:18,426 - shipping_chatbot - INFO - [get_upcoming_pos] Sample discharge ports after filter: ['LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)', 'LOS ANGELES, CA(USLAX)']
2026-01-19 17:45:18,428 - shipping_chatbot - INFO - [get_upcoming_pos] Returning 26 PO records
2026-01-20 09:15:03,175 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 09:15:03,175 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 09:15:03,175 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 09:17:59,056 - shipping_chatbot - INFO - User_Query: What containers depature from Shanghai China today, c_codes: ['0000866']
2026-01-20 09:17:59,056 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 09:18:16,056 - shipping_chatbot - INFO - Fetched 19073 rows
2026-01-20 09:18:16,061 - shipping_chatbot - INFO - Starting preprocessing on 19073 rows
2026-01-20 09:18:16,174 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 09:18:17,002 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 09:18:17,264 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 09:18:18,233 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 09:18:18,234 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 09:18:18,240 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 09:18:18,301 - shipping_chatbot - INFO - Pre-processing finished - 19073 rows remain
2026-01-20 09:18:20,977 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted: container=None, po=None, obl=None, is_booking_query=False
2026-01-20 09:18:20,979 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Extracted load_port: 'SHANGHAI'
2026-01-20 09:18:20,983 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Time window: 2026-01-20 00:00:00 to 2026-01-20 00:00:00 (today), is_booking_query=False
2026-01-20 09:18:21,079 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] After _df() consignee filter: 2107 rows
2026-01-20 09:18:21,079 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Thread consignee codes: ['0000866']
2026-01-20 09:18:21,103 - shipping_chatbot - INFO - [get_containers_departing_from_load_port] Exact name match 'SHANGHAI': 63 rows
2026-01-20 09:19:40,602 - shipping_chatbot - INFO - User_Query: Which containers are going to ENFIELD, CT in Oct, c_codes: ['0000866']
2026-01-20 09:19:43,683 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at ENFIELD, CT in October 2025
2026-01-20 09:19:43,683 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-10-01 00:00:00 to 2025-10-31 00:00:00 (October 2025)
2026-01-20 09:19:43,789 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 2107 rows
2026-01-20 09:19:43,790 - shipping_chatbot - INFO - [get_containers_by_final_destination] Using eta_fd column only
2026-01-20 09:19:43,793 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'ENFIELD', code: 'None'
2026-01-20 09:19:43,818 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-20 09:19:43,835 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 0 matches
2026-01-20 09:21:33,567 - shipping_chatbot - INFO - User_Query: Which containers are going to ENFIELD, CT in Oct, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', 'and 0048627.']
2026-01-20 09:21:36,796 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at ENFIELD, CT in October 2025
2026-01-20 09:21:36,799 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-10-01 00:00:00 to 2025-10-31 00:00:00 (October 2025)
2026-01-20 09:21:36,939 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 5001 rows
2026-01-20 09:21:36,940 - shipping_chatbot - INFO - [get_containers_by_final_destination] Using eta_fd column only
2026-01-20 09:21:36,940 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'ENFIELD', code: 'None'
2026-01-20 09:21:36,994 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-20 09:21:37,044 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 547 matches
2026-01-20 09:21:37,056 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 547 containers after FD filter
2026-01-20 09:21:37,059 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 38 containers after date filter (using eta_fd only)
2026-01-20 09:21:37,061 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 38 containers
2026-01-20 09:23:04,767 - shipping_chatbot - INFO - User_Query: What is status of 5302997239?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', 'and 0048627.']
2026-01-20 09:23:08,374 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302997239
2026-01-20 09:23:08,434 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 1 rows found
2026-01-20 09:25:38,166 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 09:27:03,305 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 09:28:15,178 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0002907']
2026-01-20 09:28:18,204 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302982894
2026-01-20 09:29:12,576 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 09:30:01,872 - shipping_chatbot - INFO - User_Query: Cargo ready date for PO#5302982894, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:30:10,519 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 5302982894
2026-01-20 09:33:47,848 - shipping_chatbot - INFO - User_Query: List the HOT PO in Booking TH2017996, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:33:51,186 - shipping_chatbot - INFO - [get_booking_details] Received query: 'TH2017996'
2026-01-20 09:33:51,191 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=TH2017996
2026-01-20 09:37:03,347 - shipping_chatbot - INFO - User_Query: please check the vendor name of 5500010589, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:37:06,583 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] Extracted: container=None, po=5500010589, obl=None, is_lookup=False
2026-01-20 09:37:06,711 - shipping_chatbot - INFO - [get_containers_PO_OBL_by_supplier] PO lookup: po_norm=5500010589, found 0 rows
2026-01-20 09:40:43,002 - shipping_chatbot - INFO - User_Query: What is discharge port ETA of SMLU4664983, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:42:44,498 - shipping_chatbot - INFO - User_Query: First and Mother vessel details of EG2002468, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:42:47,909 - shipping_chatbot - INFO - [get_vessel_info] Processing input: First and Mother vessel details of EG2002468
2026-01-20 09:42:49,026 - shipping_chatbot - INFO - [get_vessel_info] Processing input: EG2002468
2026-01-20 09:42:49,169 - shipping_chatbot - INFO - [get_vessel_info] Detected as potential booking number: EG2002468
2026-01-20 09:42:49,169 - shipping_chatbot - INFO - [get_vessel_info] Attempting booking number match: EG2002468
2026-01-20 09:42:49,169 - shipping_chatbot - INFO - [get_vessel_info] Normalized booking: 'EG2002468' -> 'EG2002468'
2026-01-20 09:42:49,216 - shipping_chatbot - INFO - [get_vessel_info] Booking search results: 1 rows found
2026-01-20 09:42:49,216 - shipping_chatbot - INFO - [get_vessel_info] Sample matching bookings: ['EG2002468']
2026-01-20 09:42:49,216 - shipping_chatbot - INFO - [get_vessel_info] Found 1 record(s) for booking EG2002468
2026-01-20 09:42:49,227 - shipping_chatbot - INFO - [get_vessel_info] Returning 1 vessel record(s) for booking EG2002468
2026-01-20 09:44:24,346 - shipping_chatbot - INFO - User_Query: PO of TH2017962, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:44:37,234 - shipping_chatbot - INFO - User_Query: PO of TH2017962, c_codes: ['0042485', '0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 09:45:27,122 - shipping_chatbot - INFO - User_Query: PO of TH2017962, c_codes: ['0042485']
2026-01-20 09:45:30,577 - shipping_chatbot - INFO - [get_booking_details] Received query: 'TH2017962'
2026-01-20 09:45:30,577 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=TH2017962
2026-01-20 09:46:28,761 - shipping_chatbot - INFO - User_Query: PO of TH2017962, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 09:46:31,548 - shipping_chatbot - INFO - [get_booking_details] Received query: 'TH2017962'
2026-01-20 09:46:31,548 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=TH2017962
2026-01-20 10:03:52,554 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 10:03:56,328 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-20 10:03:56,328 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-20 10:03:57,856 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302982894
2026-01-20 10:03:57,937 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 0 rows found
2026-01-20 10:05:19,596 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907 and 0048627.']
2026-01-20 10:05:23,792 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-20 10:05:23,792 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-20 10:05:25,170 - shipping_chatbot - INFO - [get_container_milestones] Searching for PO: 5302982894
2026-01-20 10:05:25,257 - shipping_chatbot - INFO - [get_container_milestones] PO match results: 0 rows found
2026-01-20 10:05:48,813 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0002907']
2026-01-20 10:05:52,347 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-20 10:05:52,348 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-20 10:06:19,158 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0000866', '0001363', '0001389', '0001540', '0001615', '0001660', '0001665', '0002565', '0002566', '0002569', '0002679', '0002907', '0002990', '0003235', '0003427', '0003717', '0003905', '0004932', '0004991', '0005052', '0005053', '0005056', '0005171', '0005172', '0005176', '0005177', '0005178', '0005179', '0005180', '0006360', '0006804', '0008579', '0008756', '0009633', '0012041', '0013505', '0015526', '0021103', '0021472', '0023453', '0025833', '0027113', '0028662', '0028664', '0029594', '0030961', '0030962', '0033522', '0033523', '0037359', '0037360', '0037361', '0037364', '0046854', '0047055', '0047302', '0047650', '0048392']
2026-01-20 10:06:22,600 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-20 10:06:22,600 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-20 10:08:10,572 - shipping_chatbot - INFO - User_Query: What is the container number for PO#5302982894?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 10:08:13,800 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302982894'
2026-01-20 10:08:13,800 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302982894, obl=None, booking=None
2026-01-20 10:24:25,533 - shipping_chatbot - INFO - User_Query: Which Booking is associated with PO#5300009918, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 10:24:28,868 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5300009918'
2026-01-20 10:24:28,871 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5300009918, obl=None, booking=None
2026-01-20 10:25:52,026 - shipping_chatbot - INFO - User_Query: Which OBL is associated with PO#5300009918, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 10:25:55,396 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5300009918'
2026-01-20 10:25:55,396 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5300009918, obl=None, booking=None
2026-01-20 10:29:44,015 - shipping_chatbot - INFO - User_Query: Which PO are associated with Booking#CN2229273?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 10:29:46,992 - shipping_chatbot - INFO - [get_booking_details] Received query: 'CN2229273'
2026-01-20 10:29:46,992 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=CN2229273
2026-01-20 11:06:52,489 - shipping_chatbot - INFO - User_Query: Which OBL are associated with Booking#CN2229273?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:06:55,246 - shipping_chatbot - INFO - [get_booking_details] Received query: 'CN2229273'
2026-01-20 11:06:55,247 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=CN2229273
2026-01-20 11:18:54,834 - shipping_chatbot - INFO - User_Query: Which PO are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:19:48,543 - shipping_chatbot - INFO - User_Query: Which PO are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:20:33,784 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:23:45,321 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:48:54,835 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 11:48:54,835 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 11:48:54,835 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 11:49:09,604 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:49:09,604 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 11:49:28,590 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 11:49:28,597 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 11:49:28,657 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 11:49:29,123 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 11:49:29,274 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 11:49:29,772 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 11:49:29,772 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 11:49:29,772 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 11:49:29,813 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 11:50:15,455 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:52:38,576 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 11:52:38,576 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 11:52:38,576 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 11:53:33,443 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 11:53:33,443 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 11:53:33,443 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 11:53:51,984 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:53:51,984 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 11:54:07,569 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 11:54:07,571 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 11:54:07,668 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 11:54:08,445 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 11:54:08,678 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 11:54:09,579 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 11:54:09,579 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 11:54:09,579 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 11:54:09,629 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 11:54:27,428 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:54:29,197 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLGDMLWCN0001321?, c_codes: ['0000866', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:55:27,218 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MUC59171015?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627.']
2026-01-20 11:55:30,295 - shipping_chatbot - INFO - [get_containers_for_bl] matched_rows=1 date_cols=['ata_dp', 'revised_eta', 'eta_dp'] min_date=2025-11-05 00:00:00 max_date=2025-11-05 00:00:00
2026-01-20 11:55:31,204 - shipping_chatbot - INFO - [get_booking_details] Received query: 'TCLU9332787'
2026-01-20 11:55:31,204 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=TCLU9332787, po=None, obl=None, booking=None
2026-01-20 11:55:31,204 - shipping_chatbot - INFO - [get_booking_details] Intent flags: wants_booking_number=True, wants_eta=False, wants_po=False, wants_container=False, wants_bl=False
2026-01-20 11:57:07,510 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLWVN0000904?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 11:57:27,030 - shipping_chatbot - INFO - User_Query: Which booking are associated with OBL#MLWVN0000904?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 11:59:03,691 - shipping_chatbot - INFO - User_Query: Which booking are associated with PO#5302894475?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 11:59:06,528 - shipping_chatbot - INFO - [get_booking_details] Received query: 'PO 5302894475'
2026-01-20 11:59:06,529 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=5302894475, obl=None, booking=None
2026-01-20 11:59:06,529 - shipping_chatbot - INFO - [get_booking_details] Intent flags: wants_booking_number=True, wants_eta=False, wants_po=False, wants_container=False, wants_bl=False
2026-01-20 12:21:43,723 - shipping_chatbot - INFO - User_Query: Which Booking is associated with OBL#CN7061586?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:21:46,736 - shipping_chatbot - INFO - [get_booking_details] Received query: 'CN7061586'
2026-01-20 12:21:46,736 - shipping_chatbot - INFO - [get_booking_details] Extracted identifiers: container=None, po=None, obl=None, booking=CN7061586
2026-01-20 12:21:46,743 - shipping_chatbot - INFO - [get_booking_details] Intent flags: wants_booking_number=False, wants_eta=False, wants_po=False, wants_container=False, wants_bl=False
2026-01-20 12:23:15,289 - shipping_chatbot - INFO - User_Query: Which PO is associated with OBL#CN7061586?, c_codes: ['0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:29:13,692 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#6300146311, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:29:20,140 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300146311
2026-01-20 12:45:23,108 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:45:23,108 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:45:23,108 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:45:40,223 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:45:40,223 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:45:40,224 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:45:53,697 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#6300146311, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:45:53,697 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 12:46:09,107 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 12:46:09,108 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 12:46:09,191 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 12:46:09,785 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 12:46:09,957 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 12:46:10,500 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 12:46:10,509 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 12:46:10,509 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 12:46:10,536 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 12:46:17,005 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300146311
2026-01-20 12:50:08,122 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:50:08,122 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:50:08,122 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:50:12,792 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:50:12,792 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:50:12,792 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:50:12,807 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#6300146311, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:50:12,808 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 12:50:27,704 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 12:50:27,704 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 12:50:27,822 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 12:50:28,534 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 12:50:28,754 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 12:50:29,571 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 12:50:29,571 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 12:50:29,571 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 12:50:29,607 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 12:50:35,085 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300146311
2026-01-20 12:54:17,731 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:54:17,731 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:54:17,731 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:54:21,588 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 12:54:21,588 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 12:54:21,588 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 12:57:51,838 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#6300146311, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 12:57:51,838 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 12:58:07,274 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 12:58:07,277 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 12:58:07,404 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 12:58:08,490 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 12:58:08,844 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 12:58:09,943 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 12:58:09,945 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 12:58:09,946 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 12:58:10,003 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 12:58:18,255 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300146311
2026-01-20 13:09:14,490 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 13:09:14,491 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 13:09:14,491 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 13:09:18,684 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 13:09:18,685 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 13:09:18,685 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 13:09:24,821 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#6300146311, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 13:09:24,821 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 13:09:39,817 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 13:09:39,820 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 13:09:39,915 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 13:09:40,678 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 13:09:40,896 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 13:09:41,786 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 13:09:41,786 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 13:09:41,786 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 13:09:41,828 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 13:09:50,147 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 1 records with filters: PO: 6300146311
2026-01-20 13:12:24,150 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#5302835997, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 13:12:30,608 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 4 records with filters: PO: 5302835997
2026-01-20 13:12:55,283 - shipping_chatbot - INFO - Router: Set consignee codes ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.'] for query: cargo ready date for PO#5302835997
2026-01-20 13:12:55,334 - shipping_chatbot - INFO - Consignee filtering validated: 7972 rows for codes ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 13:14:38,382 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 13:14:38,382 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 13:14:38,382 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 13:14:38,397 - shipping_chatbot - INFO - User_Query: cargo ready date for PO#5302835997, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 13:14:38,398 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 13:14:52,800 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 13:14:52,810 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 13:14:52,903 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 13:14:53,476 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 13:14:53,658 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 13:14:54,275 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 13:14:54,285 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 13:14:54,285 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 13:14:54,313 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 13:15:02,973 - shipping_chatbot - INFO - [get_cargo_ready_date] Returning 4 records with filters: PO: 5302835997
2026-01-20 14:07:53,243 - shipping_chatbot - INFO - User_Query: Which containers are arrived at HAMBURG in Oct, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:07:56,976 - shipping_chatbot - INFO - [get_arrivals_by_port] Period: October 2025, Dates: 2025-10-01 to 2025-10-31
2026-01-20 14:10:11,386 - shipping_chatbot - INFO - User_Query: Which containers are arrived at HAMBURG in Oct, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:10:14,762 - shipping_chatbot - INFO - [get_arrivals_by_port] Period: October 2025, Dates: 2025-10-01 to 2025-10-31
2026-01-20 14:14:06,651 - shipping_chatbot - INFO - User_Query: Which containers are going to ENFIELD, CT in Oct, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:14:10,560 - shipping_chatbot - INFO - [get_containers_by_final_destination] Processing query: containers arriving at ENFIELD, CT in October 2025
2026-01-20 14:14:10,560 - shipping_chatbot - INFO - [get_containers_by_final_destination] Time window: 2025-10-01 00:00:00 to 2025-10-31 00:00:00 (October 2025)
2026-01-20 14:14:10,709 - shipping_chatbot - INFO - [get_containers_by_final_destination] Initial dataset: 7972 rows
2026-01-20 14:14:10,709 - shipping_chatbot - INFO - [get_containers_by_final_destination] Using eta_fd column only
2026-01-20 14:14:10,709 - shipping_chatbot - INFO - [get_containers_by_final_destination] Extracted FD location: 'ENFIELD', code: 'None'
2026-01-20 14:14:10,811 - shipping_chatbot - INFO - [get_containers_by_final_destination] Exact name match: 0 matches
2026-01-20 14:14:10,893 - shipping_chatbot - INFO - [get_containers_by_final_destination] Word-based match: 545 matches
2026-01-20 14:14:10,914 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 545 containers after FD filter
2026-01-20 14:14:10,914 - shipping_chatbot - INFO - [get_containers_by_final_destination] Found 38 containers after date filter (using eta_fd only)
2026-01-20 14:14:10,923 - shipping_chatbot - INFO - [get_containers_by_final_destination] Returning 38 containers
2026-01-20 14:23:44,240 - shipping_chatbot - INFO - User_Query: What is the ETA of booking VN2092736, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:24:07,518 - shipping_chatbot - INFO - Router: Set consignee codes ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.'] for query: What is the ETA of booking VN2092736
2026-01-20 14:24:07,647 - shipping_chatbot - INFO - Consignee filtering validated: 7972 rows for codes ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:24:16,159 - shipping_chatbot - INFO - User_Query: What is the ETA of booking VN2092736, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:29:02,490 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 14:29:02,490 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 14:29:02,490 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 14:29:22,870 - shipping_chatbot - INFO - User_Query: What is the ETA of booking VN2092736, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:29:22,871 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 14:29:42,761 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 14:29:42,769 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 14:29:42,978 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 14:29:43,902 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 14:29:44,144 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 14:29:45,199 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 14:29:45,203 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 14:29:45,203 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 14:29:45,289 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
2026-01-20 14:32:29,338 - shipping_chatbot - INFO - AzureChatOpenAI ready
2026-01-20 14:32:29,340 - shipping_chatbot - INFO - Agent created with 53 tools
2026-01-20 14:32:29,340 - shipping_chatbot - INFO - Agent ready for HTTP requests
2026-01-20 14:32:36,156 - shipping_chatbot - INFO - User_Query: What is the ETA of booking VN2092736, c_codes: ['0028664', '0000866', '0005053', '0042485', '0042652', '0043881', '0043882', '0045831', '0048201', '0002907', '0048627', '0028664.']
2026-01-20 14:32:36,156 - shipping_chatbot - INFO - Downloading shipment CSV from Azure Blob Storage
2026-01-20 14:32:57,572 - shipping_chatbot - INFO - Fetched 18991 rows
2026-01-20 14:32:57,575 - shipping_chatbot - INFO - Starting preprocessing on 18991 rows
2026-01-20 14:32:57,715 - shipping_chatbot - INFO - Removed 0 duplicate rows
2026-01-20 14:32:58,488 - shipping_chatbot - INFO - Converted 31 date columns to datetime format
2026-01-20 14:32:58,742 - shipping_chatbot - INFO - Normalized 6 'multiple' columns
2026-01-20 14:32:59,675 - shipping_chatbot - INFO - Added `delay_days` column with FIXED logic
2026-01-20 14:32:59,675 - shipping_chatbot - INFO - Added `actual_transit_days` column
2026-01-20 14:32:59,682 - shipping_chatbot - INFO - Added `estimated_transit_days` column
2026-01-20 14:32:59,727 - shipping_chatbot - INFO - Pre-processing finished - 18991 rows remain
